-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '635ba55725a33770' HASH 'e369656e03d3da599a3ec7a33b8f392fa2610ebcc903e186d18422242eb2e890' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."USER_APP"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255),
    "ROLE" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);     
ALTER TABLE "PUBLIC"."USER_APP" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_APP;
CREATE CACHED TABLE "PUBLIC"."APP_USER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255),
    "ROLE" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);      
ALTER TABLE "PUBLIC"."APP_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");     
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.APP_USER;
INSERT INTO "PUBLIC"."APP_USER" VALUES
(1, 'password', 'USER', 'user1'),
(2, 'password', 'SAV', 'sav'),
(3, 'password', 'USER', 'user2');  
CREATE CACHED TABLE "PUBLIC"."MESSAGE"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 14) NOT NULL,
    "ENCRYPTED_CONTENT" CHARACTER VARYING,
    "SENDER" CHARACTER VARYING(255),
    "TIMESTAMP" TIMESTAMP(6),
    "RECEIVER" CHARACTER VARYING(255),
    "CONTENT" CHARACTER VARYING(255),
    "RECEIVER_ID" BIGINT,
    "SENDER_ID" BIGINT
);      
ALTER TABLE "PUBLIC"."MESSAGE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");      
-- 13 +/- SELECT COUNT(*) FROM PUBLIC.MESSAGE;
INSERT INTO "PUBLIC"."MESSAGE" VALUES
(1, 'oovMB821aznMp1tP5dtU1g==', 'sav', TIMESTAMP '2025-05-23 07:20:52.194057', NULL, NULL, NULL, NULL),
(2, 'Lm7cLnXXIIQLQWNmsuSAVA==', 'sav', TIMESTAMP '2025-05-23 07:21:26.145345', NULL, NULL, NULL, NULL),
(3, 'V6CJjO00BZB83b1U6YGUbw==', 'sav', TIMESTAMP '2025-05-23 07:22:30.101169', NULL, NULL, NULL, NULL),
(4, 'UUUGDfl/xJsyIGqUDJTtIA==', 'user', TIMESTAMP '2025-05-23 07:44:12.156425', NULL, NULL, NULL, NULL),
(5, 'Q6Z9CEY8R9QiY7jRcbbcKQ==', 'sav', TIMESTAMP '2025-05-23 07:45:21.847839', NULL, NULL, NULL, NULL),
(6, 'bE51zhlPrvddyRR2kgTPWQ==', 'sav', TIMESTAMP '2025-05-23 07:46:49.52019', NULL, NULL, NULL, NULL),
(7, NULL, NULL, TIMESTAMP '2025-05-29 07:33:51.864001', NULL, 'hello sav je suis user1', 2, 1),
(8, NULL, NULL, TIMESTAMP '2025-05-29 07:40:27.645824', NULL, 'hello user1je suis le sav', 1, 2),
(9, NULL, NULL, TIMESTAMP '2025-05-29 08:06:50.680619', NULL, 'hello user 2 je suis sav premier message', 3, 2),
(10, NULL, NULL, TIMESTAMP '2025-05-29 08:12:59.79254', NULL, 'merci du message sav', 2, 3),
(11, NULL, NULL, TIMESTAMP '2025-05-30 09:06:52.149294', NULL, 'las mess', 2, 1),
(12, NULL, NULL, TIMESTAMP '2025-05-30 09:07:02.442052', NULL, 'last message user1', 2, 1),
(13, NULL, NULL, TIMESTAMP '2025-05-30 09:07:45.724585', NULL, 'dernier message sav', 3, 2); 
